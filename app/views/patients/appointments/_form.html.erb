<%= form_with(model: appointment,url: "/patients/appointments/#{@appointment.id}") do |form| %>
  <div>
    <%= form.label :doctor_id, style: "display: block" %>
    <% if @selected_doctor %>
      <%= form.hidden_field :doctor_id, value: @selected_doctor.id, readonly: true %>
      <div class="field">
        <%= @selected_doctor.full_name %>
  </div>
      <div class="field">
        <%= @selected_doctor.spec.name_spec %>
      </div>
    <%end %>
  </div>

  <div>
    <%= form.hidden_field :outpatient_card_id%>
  </div>

  <%= form.label :appointment_date, style: "display: block" %>
  <%= form.select :appointment_date, options_for_select(@available_dates), {}, {class: 'form-control'} %>

  <div>
    <%= form.hidden_field :report, readonly: true %>
  </div>

  <div>
    <%= form.hidden_field :status, readonly: true %>
  </div>

  <% if appointment.finished? %>
    <div class="field">
      <%= form.label :rating %>
      <%= form.select :rating, (1..5).map { |n| [n, n] }, prompt: "Select rating", include_blank: true %>
    </div>
  <% end %>

  <div>
    <%= form.submit 'Submit', disabled: @available_dates.empty? %>
  </div>
<% end %>
